# PuzzleFactory Scroll Fix

![Иконка расширения](icon48.png)

## Описание

**PuzzleFactory Scroll Fix** — это расширение для Google Chrome, созданное для устранения проблем с автоматической прокруткой страницы вверх и появления нежелательных окон на сайте [puzzlefactory.com](https://puzzlefactory.com). Эти проблемы возникали из-за использования блокировщика рекламы, который вызывал появление всплывающих окон и неконтролируемую прокрутку страницы.

## Основные функции

1. **Удаление класса `vjul89`**:

   - Удаляет класс `vjul89` со всех элементов на странице, предотвращая появление нежелательных стилей и поведения.

2. **Удаление инлайн-стилей из `<body>`**:

   - Убирает следующие стили из тега `<body>`:
     - `overflow: hidden;`
     - `top: 0px;`
     - `left: 0px;`
   - Это предотвращает блокировку прокрутки и фиксирование позиции страницы.

3. **Блокировка обработчиков событий `scroll`**:

   - Предотвращает добавление и выполнение обработчиков событий `scroll`, что останавливает автоматическую прокрутку страницы вверх.

4. **Предотвращение выполнения функций `killScroll` и `reviveScroll`**:
   - Отключает функции, которые используются сайтом для блокировки и разблокировки прокрутки страницы.

## Как работает расширение

Расширение состоит из двух основных скриптов:

1. **`content.js`**:

   - Выполняется на странице `https://puzzlefactory.com/*` при запуске расширения.
   - Внедряет внешний скрипт `inject.js` в контекст страницы для изменения глобальных объектов и функций.
   - Удаляет класс `vjul89` и инлайн-стили из `<body>`.
   - Настраивает `MutationObserver` для постоянного отслеживания и устранения изменений в DOM, связанных с классом `vjul89` и стилями `<body>`.

2. **`inject.js`**:
   - Выполняется непосредственно в контексте страницы, что позволяет изменять глобальные объекты, такие как `window.onscroll`.
   - Переопределяет методы прокрутки (`scrollTo`, `scrollBy`, `scrollIntoView`) и блокирует их выполнение.
   - Использует `Proxy` для перехвата и блокировки изменений стилей `overflow`, `top` и `left` у тега `<body>`.
   - Периодически сбрасывает `window.onscroll`, если он был изменён.
   - Блокирует добавление и удаление обработчиков событий `scroll`.
   - Переопределяет функции `killScroll` и `reviveScroll`, если они существуют на странице.

## Установка

1. **Скачайте или клонируйте репозиторий**:
   ```bash
   git clone https://github.com/BF-GO/puzzlefactoryBlockFix.git
   ```
2. **Откройте Google Chrome и перейдите на страницу расширений:**

   [chrome://extensions/](chrome://extensions/)

3. **Включите режим разработчика** в правом верхнем углу.

4. **Нажмите кнопку "Загрузить распакованное расширение"** и выберите папку с расширением (`puzzlefactory-scroll-fix`).

5. **Убедитесь, что расширение установлено и активно.**

## Использование

После установки расширения оно автоматически начнёт работать на сайте [puzzlefactory.com](https://puzzlefactory.com). Вам не требуется выполнять дополнительные действия. Расширение будет:

- Удалять класс `vjul89` со всех элементов.
- Сбрасывать инлайн-стили `overflow`, `top` и `left` у тега `<body>`.
- Блокировать добавление и выполнение обработчиков событий `scroll`, предотвращая автоматическую прокрутку страницы вверх.

## Решение проблем

Если расширение не работает должным образом:

1. **Проверьте, что расширение активно** на сайте [puzzlefactory.com](https://puzzlefactory.com).

2. **Откройте консоль разработчика** (F12 или правой кнопкой мыши → "Inspect") и проверьте наличие предупреждений от расширения (сообщения `console.warn`).

3. **Убедитесь, что `manifest.json` настроен правильно**, особенно раздел `matches` в `content_scripts`, который должен соответствовать URL сайта.

4. **Проверьте наличие ошибок в скриптах**:
   - Откройте вкладку "Console" в DevTools и посмотрите, нет ли ошибок, связанных с расширением.

## Вклад в проект

Если вы хотите внести свой вклад в улучшение расширения, вы можете создать pull request или сообщить об ошибках через [Issues](https://github.com/BF-GO/puzzlefactoryBlockFix/issues).

## Контакты

Если у вас есть вопросы или предложения, свяжитесь с нами по адресу: [26bfgo@gmail.com](mailto:26bfgo@gmail.com)

Или свяжитесь со мной в Discord: **bf_go**
